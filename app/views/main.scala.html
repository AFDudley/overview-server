@(
  optionalUser: Option[OverviewUser],
  title: String,
  bodyClass: String="default",
  h1: String="",
  javascripts: Html=Html(""),
  jsMessageKeys: Seq[String]=Seq()
)(
  content: Html
)(
  implicit lang: Lang, flash: Flash
)
@import play.api.Play
@import play.api.Play.current
<!DOCTYPE html>
<html lang="@lang.code">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@title</title>
    <link rel="shortcut icon" type="image/x-icon" href="@routes.Assets.at("images/favicon.ico")" />
    @bundleStylesheet("main")
  </head>
  <body class="@bodyClass">
    @views.html.components.navbar(optionalUser)
    <div class="container">
      @if(h1 != "") {
        <div class="page-header"><h1>@h1</h1></div>
      }
      @flash.get("success").map { notice =>
        <div class="alert alert-success fade in"><button type="button" class="close" data-dismiss="alert">x</button>@notice</div>
      }
      @flash.get("error").map { error =>
        <div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">x</button>@error</div>
      }
      @content
    </div>

    <!--[if lte IE 8]>
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
      <script type="text/javascript">
       CFInstall.check({
          mode: "overlay",
       });
      </script>
    <![endif]-->

    @if(!jsMessageKeys.isEmpty) {
      @bundleJavascript("i18n")
      <script type="text/javascript">
        window.i18n = window.use_i18n_messages(@Html(views.JsMessages(jsMessageKeys)));
      </script>
    }

    @bundleJavascript("defaults")

    @javascripts

    @defining(Play.application.configuration.getString("analytics.ga_tracking_id").getOrElse("")) { trackingId =>
      @if(trackingId.length > 0) {
        <script type="text/javascript">
          if (/https:\/\/www.overviewproject.org/.test("" + window.location)) {
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', '@trackingId']);
            _gaq.push(['_trackPageview']);

            (function() {
             var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
             ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
             var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
           })();
          }
        </script>
      }
    }
  </body>
</html>
