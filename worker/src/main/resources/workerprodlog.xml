<configuration>

    <turboFilter class="ch.qos.logback.classic.turbo.DuplicateMessageFilter">
      <AllowedRepetitions>2</AllowedRepetitions>
    </turboFilter>

    <appender name="EMAIL" class="ch.qos.logback.classic.net.SMTPAppender">
      <smtpHost>smtp.sendgrid.net</smtpHost>
      <username>${SENDGRID_USERNAME}</username>
      <password>${SENDGRID_PASSWORD}</password>
      <smtpPort>587</smtpPort>
      <to>${LOG_EMAIL}</to>
      <from>${SERVER_NAME}-server@overviewproject.org</from>
      <subject>${LOG_SUBJECT_PREFIX} (worker): %logger{20} - %m</subject>
      <layout class="ch.qos.logback.classic.PatternLayout">
	<pattern>%date{yyyy-MM-dd HH:mm:ss.SSS z,GMT} %-5level %logger{36} - %message%n</pattern>
      </layout>       
    </appender>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%-5level %logger{36} - %message%n</pattern>
        </encoder>
    </appender>

    <root level="ERROR">
        <appender-ref ref="EMAIL"/>
        <appender-ref ref="STDOUT"/>
    </root>

</configuration>
